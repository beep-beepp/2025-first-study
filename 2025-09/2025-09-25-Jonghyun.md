# Java Build System

# Maven

- POM(project object model): pom.xml에 모든 설정을 한다.
    - pom 예시
        
        개구리네…
        
        ```xml
        <project xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="
        http://maven.apache.org/POM/4.0.0http://maven.apache.org/maven-v4_0_0.xsd">
        <!-- POM 버전 -->
        <modelVersion>4.0.0</modelVersion>
        
        <!-- 프로젝트 식별자 -->
        <groupId>com.example</groupId>       <!-- 보통 도메인 거꾸로 -->
        <artifactId>my-app</artifactId>      <!-- 프로젝트 이름 -->
        <version>1.0.0</version>             <!-- 프로젝트 버전 -->
        <packaging>jar</packaging>           <!-- jar, war 등 -->
        
        <name>My Application</name>
        <description>Demo project for Maven</description>
        
        <!-- 의존성 -->
        <dependencies>
            <!-- JUnit 의존성 -->
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>4.13.2</version>
                <scope>test</scope>
            </dependency>
        
            <!-- Spring Boot 예시 -->
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter-web</artifactId>
                <version>3.2.2</version>
            </dependency>
        </dependencies>
        
        <!-- 빌드 관련 설정 -->
        <build>
            <plugins>
                <!-- Java 컴파일러 버전 설정 -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>3.10.1</version>
                    <configuration>
                        <source>17</source>
                        <target>17</target>
                    </configuration>
                </plugin>
            </plugins>
        </build>
        </project>
        ```
        
- validate: 빌드 시작 전에 프로젝트 유효 검사
    - 프로젝트 구조, pom.xml 확인, 디렉토리확인 의존성 확인
- compile
- test
    - 컴파일을 바라보고 함
- package
- verify
- install

# Gradle

## **2. Gradle 기본 빌드 흐름**

Spring Boot + Gradle(Java 프로젝트) 기준으로 보면:

1. **compileJava**
    - src/main/java → .class
    - 출력: build/classes/java/main
2. **processResources**
    - src/main/resources → build/resources/main 으로 복사
3. **classes**
    - compileJava + processResources 결과 합치기
4. **compileTestJava**
    - src/test/java → build/classes/java/test
5. **processTestResources**
    - src/test/resources → build/resources/test
6. **testClasses**
    - compileTestJava + processTestResources
7. **test**
    - JUnit/TestNG 실행
8. **jar** (또는 Spring Boot는 **bootJar**)
    - classes 결과물 → JAR 생성 (build/libs/xxx.jar)
9. **check**
    - test 및 품질 검사(Lint, Code Coverage 등) 결과 모음
    - Maven의 verify 와 비슷한 역할
10. **build**
    - assemble (jar 생성) + check (테스트/검증)
    - 최종적으로 “빌드 완료” 의미

# IntelliJ

- Maven과 Gradle과 동작이 달라서 순차설명보다 특징을 확인

### **특징**

1. **Incremental build (증분 빌드) ← 인텔리제이가 빠른이유**
    - 코드가 바뀐 부분만 다시 컴파일 → 전체 빌드보다 빠름.
    - 기본적으로 out/ 디렉토리에 .class 파일 생성.
2. **IDE 자체 컴파일러 사용**
    - Gradle/Maven의 빌드 프로세스와 별개로, IntelliJ의 javac (또는 자체 빌드 시스템 JPS, JetBrains Project System)을 사용.
    - 실행시 Maven/Gradle이 아니라 IntelliJ 빌드 결과물을 실행함.
3. **빌드와 실행의 분리**
    - Maven/Gradle은 보통 compile → test → package → run 식으로 이어지는데,
    - IntelliJ는 IDE 차원에서 **컴파일만 빠르게 하고 바로 실행**하는 경우가 많음.
4. **Gradle/Maven 연동 모드 차이**
    - IntelliJ에서 “Build and run using” 옵션으로:
        - IntelliJ IDEA (기본값: 빠르지만 Maven/Gradle 빌드와는 다를 수 있음)
        - Gradle/Maven (느리지만 실제 빌드 결과와 동일)
    - 팀 프로젝트라면 보통 **Gradle 빌드 결과와 일치시켜야** 배포 시 문제 없음.

| **Maven** | **Gradle** | **IntelliJ (IDE 빌드)** |
| --- | --- | --- | --- |
| 설정 방식 | pom.xml (XML, 선언적) | build.gradle(.kts) (DSL, 유연/스크립트) | IDE 내부 설정 |
| 출력 위치 | target/ | build/ | out/ |
| 속도 | 느림 (전체 빌드 중심) | 중간 (증분/캐시 지원, 병렬 빌드 가능) | 가장 빠름 (증분 빌드, IDE 최적화) |
| 장점 | 표준화, 안정적 | 유연성, 성능 최적화 가능 | 빠른 빌드·실행, IDE와 밀접 |
| 단점 | 유연성 부족, 빌드 느림 | 러닝커브 있음, 스크립트 복잡해질 수 있음 | CI/CD와 빌드 결과가 다를 수 있음 |