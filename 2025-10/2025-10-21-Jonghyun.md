# Database

# PostgreSQL

MVCC 제어방식: 읽기와 쓰기가 동시에 이뤄져도 서로 영향을 거의 주지 않고 Lock은 충돌이 발생하는 경우에만 적극적으로 사용

- **각 트랜잭션마다 DB의 "스냅샷"을 가짐:** 특정 시점의 데이터만 보여주므로, 동시에 수정이 일어나도 읽기는 지연되지 않음.
- PostgreSQL의 핵심 동시성 제어 방식 **MVCC(Multi-Version Concurrency Control)**
- 내부적으로 lock table을 두고 어떤 객체(테이블, 행 등)를 잠갔는지 기록한다.
    - row-level에서는 lightweight lock(rock flag)
        - 행 단위로 걸리는 락은 수정이 일어날 때마다 lock 정보를 기억한다.
        - 해당 필드에 락을 관리하는 정보가 있음  ex) ttl
            - postgre에서 자체적으로 관리하는, 사용자한테 보이지 않는 메타데이더를 튜플이라고 부른다.

# Oracle

오라클도 동시성 제어헤서 MVCC를  사용하지만 구현 방식과 Lock 관리가 다르다.

- SCN으로 관리 내부에 Undo Tablespace가 있어서 과거 데이터를 저장하고 보이는 데이터에는 항상 최신으로 한다.
